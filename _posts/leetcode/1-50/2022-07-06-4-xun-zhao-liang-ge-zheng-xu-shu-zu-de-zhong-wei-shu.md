---
title: 4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°
author: guo-nix
date: 2022-07-06 14:30:00 +0800
categories: [LeetCode, æ•°ç»„]
tags: [æ•°æ®ç»“æ„ä¸ç®—æ³•]  
math: true
---

## é—®é¢˜æè¿°
 

ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ã€‚ 

è¿›é˜¶ï¼šä½ èƒ½è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º $$O(log (m+n))$$ çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ 


``` 
è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
è¾“å‡ºï¼š2.00000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
```
{: file="ç¤ºä¾‹ 1" }

 
```
è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
è¾“å‡ºï¼š2.50000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
```
{: file="ç¤ºä¾‹ 2" }


```
è¾“å…¥ï¼šnums1 = [0,0], nums2 = [0,0]
è¾“å‡ºï¼š0.00000
```
{: file="ç¤ºä¾‹ 3" }


```
è¾“å…¥ï¼šnums1 = [], nums2 = [1]
è¾“å‡ºï¼š1.00000
```
{: file="ç¤ºä¾‹ 4" }


``` 
è¾“å…¥ï¼šnums1 = [2], nums2 = []
è¾“å‡ºï¼š2.00000
```
{: file="ç¤ºä¾‹ 5" }


```
nums1.length == m 
nums2.length == n 
0 <= m <= 1000 
0 <= n <= 1000 
1 <= m + n <= 2000 
-106 <= nums1[i], nums2[i] <= 106 
```
{: file="æç¤º" }

Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åˆ†æ²»ç®—æ³• 


### æ–¹æ³•ä¸€ã€åˆå¹¶åæŸ¥æ‰¾

ç»™å®šä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œè¦æ±‚æ‰¾åˆ°ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œæœ€ç›´è§‚çš„æ€è·¯æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š

- ä½¿ç”¨å½’å¹¶çš„æ–¹å¼ï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œå¾—åˆ°ä¸€ä¸ªå¤§çš„æœ‰åºæ•°ç»„ã€‚å¤§çš„æœ‰åºæ•°ç»„çš„ä¸­é—´ä½ç½®çš„å…ƒç´ ï¼Œå³ä¸ºä¸­ä½æ•°ã€‚

- ä¸éœ€è¦åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œåªè¦æ‰¾åˆ°ä¸­ä½æ•°çš„ä½ç½®å³å¯ã€‚ç”±äºä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦å·²çŸ¥ï¼Œå› æ­¤ä¸­ä½æ•°å¯¹åº”çš„ä¸¤ä¸ªæ•°ç»„çš„ä¸‹æ ‡ä¹‹å’Œä¹Ÿæ˜¯å·²çŸ¥çš„ã€‚ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆå§‹æ—¶åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªæ•°ç»„çš„ä¸‹æ ‡ 0 çš„ä½ç½®ï¼Œæ¯æ¬¡å°†æŒ‡å‘è¾ƒå°å€¼çš„æŒ‡é’ˆåç§»ä¸€ä½ï¼ˆå¦‚æœä¸€ä¸ªæŒ‡é’ˆå·²ç»åˆ°è¾¾æ•°ç»„æœ«å°¾ï¼Œåˆ™åªéœ€è¦ç§»åŠ¨å¦ä¸€ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼‰ï¼Œç›´åˆ°åˆ°è¾¾ä¸­ä½æ•°çš„ä½ç½®ã€‚

å‡è®¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„é•¿åº¦åˆ†åˆ«ä¸º m å’Œ nï¼Œä¸Šè¿°ä¸¤ç§æ€è·¯çš„å¤æ‚åº¦å¦‚ä½•ï¼Ÿ

- ç¬¬ä¸€ç§æ€è·¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(m+n)`ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ `O(m+n)`ã€‚

- ç¬¬äºŒç§æ€è·¯è™½ç„¶å¯ä»¥å°†ç©ºé—´å¤æ‚åº¦é™åˆ° `O(1)`ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦ä»æ˜¯ `O(m+n)`ã€‚



### æ–¹æ³•äºŒã€äºŒåˆ†æŸ¥æ‰¾

å¦‚ä½•æŠŠæ—¶é—´å¤æ‚åº¦é™ä½åˆ° `O(log(m+n))` å‘¢ï¼Ÿå¦‚æœå¯¹æ—¶é—´å¤æ‚åº¦çš„è¦æ±‚æœ‰ logï¼Œé€šå¸¸éƒ½éœ€è¦ç”¨åˆ°äºŒåˆ†æŸ¥æ‰¾ã€‚


æ ¹æ®ä¸­ä½æ•°çš„å®šä¹‰ï¼Œå½“ `m+n` æ˜¯å¥‡æ•°æ—¶ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ç¬¬ `(m+n)/2+1` ä¸ªå…ƒç´ ï¼Œå½“ `m+n` æ˜¯å¶æ•°æ—¶ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ç¬¬ `(m+n)/2` ä¸ªå…ƒç´ å’Œç¬¬ `(m+n)/2+1` ä¸ªå…ƒç´ çš„å¹³å‡å€¼ã€‚å› æ­¤ï¼Œè¿™é“é¢˜å¯ä»¥è½¬åŒ–æˆå¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ç¬¬ `k` å°çš„æ•°ï¼Œå…¶ä¸­ `k` ä¸º `(m+n)/2` æˆ– `(m+n)/2+1`ã€‚


å‡è®¾ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆ†åˆ«æ˜¯ `A` å’Œ `B`ã€‚è¦æ‰¾åˆ°ç¬¬ `k` ä¸ªå…ƒç´ ï¼Œå¯ä»¥æ¯”è¾ƒ `A[k/2âˆ’1]` å’Œ `B[k/2âˆ’1]`ï¼Œå…¶ä¸­ `/` è¡¨ç¤ºæ•´æ•°é™¤æ³•ã€‚ç”±äº `A[k/2âˆ’1]` å’Œ `B[k/2âˆ’1]` çš„å‰é¢åˆ†åˆ«æœ‰ `A[0..k/2âˆ’2]` å’Œ `B[0..k/2âˆ’2]`ï¼Œå³ `k/2âˆ’1` ä¸ªå…ƒç´ ï¼Œå¯¹äº `A[k/2âˆ’1]` å’Œ `B[k/2âˆ’1]` ä¸­çš„è¾ƒå°å€¼ï¼Œæœ€å¤šåªä¼šæœ‰ `(k/2âˆ’1)+(k/2âˆ’1)â‰¤kâˆ’2` ä¸ªå…ƒç´ æ¯”å®ƒå°ï¼Œé‚£ä¹ˆå®ƒå°±ä¸èƒ½æ˜¯ç¬¬ `k` å°çš„æ•°äº†ã€‚

å› æ­¤å¯ä»¥å½’çº³å‡ºä¸‰ç§æƒ…å†µï¼š

- å¦‚æœ `A[k/2âˆ’1]<B[k/2âˆ’1]`ï¼Œåˆ™æ¯” `A[k/2âˆ’1]` å°çš„æ•°æœ€å¤šåªæœ‰ `A` çš„å‰ `k/2âˆ’1` ä¸ªæ•°å’Œ `B` çš„å‰ `k/2âˆ’1` ä¸ªæ•°ï¼Œå³æ¯” `A[k/2âˆ’1]` å°çš„æ•°æœ€å¤šåªæœ‰ `kâˆ’2` ä¸ªï¼Œå› æ­¤ `A[k/2âˆ’1]` ä¸å¯èƒ½æ˜¯ç¬¬ `k` ä¸ªæ•°ï¼Œ`A[0]` åˆ° `A[k/2âˆ’1]` ä¹Ÿéƒ½ä¸å¯èƒ½æ˜¯ç¬¬ `k` ä¸ªæ•°ï¼Œå¯ä»¥å…¨éƒ¨æ’é™¤ã€‚

- å¦‚æœ `A[k/2âˆ’1]>B[k/2âˆ’1]`ï¼Œåˆ™å¯ä»¥æ’é™¤ `B[0]` åˆ° `B[k/2âˆ’1]`ã€‚

- å¦‚æœ `A[k/2âˆ’1]=B[k/2âˆ’1]`ï¼Œåˆ™å¯ä»¥å½’å…¥ç¬¬ä¸€ç§æƒ…å†µå¤„ç†ã€‚


![](/assets/img/leetcode/1-50/4_fig1.png)


å¯ä»¥çœ‹åˆ°ï¼Œæ¯”è¾ƒ `A[k/2âˆ’1]` å’Œ `B[k/2âˆ’1]` ä¹‹åï¼Œå¯ä»¥æ’é™¤ `k/2` ä¸ªä¸å¯èƒ½æ˜¯ç¬¬ `k` å°çš„æ•°ï¼ŒæŸ¥æ‰¾èŒƒå›´ç¼©å°äº†ä¸€åŠã€‚åŒæ—¶ï¼Œå°†åœ¨æ’é™¤åçš„æ–°æ•°ç»„ä¸Šç»§ç»­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¹¶ä¸”æ ¹æ®æ’é™¤æ•°çš„ä¸ªæ•°ï¼Œå‡å°‘ `k` çš„å€¼ï¼Œè¿™æ˜¯å› ä¸ºæ’é™¤çš„æ•°éƒ½ä¸å¤§äºç¬¬ `k` å°çš„æ•°ã€‚

ğŸ’æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µéœ€è¦ç‰¹æ®Šå¤„ç†ï¼š

- å¦‚æœ `A[k/2âˆ’1]` æˆ–è€… `B[k/2âˆ’1]` è¶Šç•Œï¼Œé‚£ä¹ˆå¯ä»¥é€‰å–å¯¹åº”æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»æ ¹æ®æ’é™¤æ•°çš„ä¸ªæ•°å‡å°‘ `k` çš„å€¼ï¼Œè€Œä¸èƒ½ç›´æ¥å°† `k` å‡å» `k/2`ã€‚

- å¦‚æœä¸€ä¸ªæ•°ç»„ä¸ºç©ºï¼Œè¯´æ˜è¯¥æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¢«æ’é™¤ï¼Œå¯ä»¥ç›´æ¥è¿”å›å¦ä¸€ä¸ªæ•°ç»„ä¸­ç¬¬ `k` å°çš„å…ƒç´ ã€‚

- å¦‚æœ `k=1`ï¼Œåªè¦è¿”å›ä¸¤ä¸ªæ•°ç»„é¦–å…ƒç´ çš„æœ€å°å€¼å³å¯ã€‚


**æ˜ç¡® kï¼šç¬¬ k ä¸ªå°çš„å…ƒç´ ï¼Œä¸æ˜¯æŒ‡çš„ç´¢å¼•ï¼**

```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int length1 = nums1.length, length2 = nums2.length;
        int totalLength = length1 + length2;
        if(totalLength % 2 ==1 ){
            int midIndex = totalLength / 2;
            double median = getKthElement(nums1, nums2, midIndex+1);
            return median;
        }else{
            int midIndex1 = totalLength / 2 - 1, midIndex2 = totalLength / 2;
            double median = (getKthElement(nums1, nums2, midIndex1+1) + getKthElement(nums1, nums2, midIndex2+1))/2.0;
            return median;
        }
    }

    public int getKthElement(int[] nums1, int[] nums2, int k){
        int length1 = nums1.length, length2 = nums2.length;
        int index1 = 0, index2 = 0;

        while(true){
            //è¾¹ç•Œå¤„ç†
            if(index1==length1) return nums2[index2+k-1];
            if(index2==length2) return nums1[index1+k-1];
            if(k==1) return Math.min(nums1[index1], nums2[index2]);

            //æ­£å¸¸æƒ…å†µä¸‹
            int half = k/2;
            int newIndex1 = Math.min(index1+half, length1)-1;
            int newIndex2 = Math.min(index2+half, length2)-1;
            if(nums1[newIndex1]<=nums2[newIndex2]){
                k -= (newIndex1-index1+1);
                index1 = newIndex1 + 1;
            }else{
                k -= (newIndex2-index2+1);
                index2 = newIndex2 + 1;
            }
        }
    }
}
```


å¤æ‚åº¦åˆ†æ

- æ—¶é—´å¤æ‚åº¦ï¼š`O(log(m+n))`ï¼Œå…¶ä¸­ m å’Œ n åˆ†åˆ«æ˜¯æ•°ç»„ nums1 å’Œ nums2 çš„é•¿åº¦ã€‚åˆå§‹æ—¶æœ‰ `k=(m+n)/2` æˆ– `k=(m+n)/2+1`ï¼Œæ¯ä¸€è½®å¾ªç¯å¯ä»¥å°†æŸ¥æ‰¾èŒƒå›´å‡å°‘ä¸€åŠï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ `O(log(m+n))`ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼š`O(1)`ã€‚



### æ–¹æ³•ä¸‰ã€åˆ’åˆ†æ•°ç»„


æ—¶é—´å¤æ‚åº¦æ›´ä½ï¼Œ`O(log min(m,n)))`

[é¢˜è§£](https://leetcode-cn.com/problems/median-of-two-sorted-arrays/solution/xun-zhao-liang-ge-you-xu-shu-zu-de-zhong-wei-s-114/)


```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        if (nums1.length > nums2.length) {
            return findMedianSortedArrays(nums2, nums1);
        }

        int m = nums1.length;
        int n = nums2.length;
        int left = 0, right = m;
        // median1ï¼šå‰ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼
        // median2ï¼šåä¸€éƒ¨åˆ†çš„æœ€å°å€¼
        int median1 = 0, median2 = 0;

        while (left <= right) {
            // å‰ä¸€éƒ¨åˆ†åŒ…å« nums1[0 .. i-1] å’Œ nums2[0 .. j-1]
            // åä¸€éƒ¨åˆ†åŒ…å« nums1[i .. m-1] å’Œ nums2[j .. n-1]
            int i = (left + right) / 2;
            int j = (m + n + 1) / 2 - i;

            // nums_im1, nums_i, nums_jm1, nums_j åˆ†åˆ«è¡¨ç¤º nums1[i-1], nums1[i], nums2[j-1], nums2[j]
            int nums_im1 = (i == 0 ? Integer.MIN_VALUE : nums1[i - 1]);
            int nums_i = (i == m ? Integer.MAX_VALUE : nums1[i]);
            int nums_jm1 = (j == 0 ? Integer.MIN_VALUE : nums2[j - 1]);
            int nums_j = (j == n ? Integer.MAX_VALUE : nums2[j]);

            if (nums_im1 <= nums_j) {
                median1 = Math.max(nums_im1, nums_jm1);
                median2 = Math.min(nums_i, nums_j);
                left = i + 1;
            } else {
                right = i - 1;
            }
        }

        return (m + n) % 2 == 0 ? (median1 + median2) / 2.0 : median1;
    }
}
```